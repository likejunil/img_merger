# img_merger

### 반드시 설치해야 할 프로그램

- Ghostscript (eps 파일을 pdf 로 변환하기 위해)
- libdmtx (data matrix 를 생성하기 위해)
- inkscape (upc 타입의 바코드를 생성하기 위해)

### 주의사항

1. PIL 패키지를 사용할 경우
    - PIL 패키지는 비트맵 방식의 이미지를 처리하는데 특화된 라이브러리이다.
    - 따라서 eps, svg, pdf 와 같은 벡터 방식의 이미지를 로딩할 경우, 해당 이미지의 벡터 정보를 손실한다.
    - 그러나 jpg, png 등의 비트맵 이미지를 로딩하여 pdf 로 변환하는 것은 가능하다.
    - 단, 3번의 경우 pdf 이미지를 생성한다고 해도 원래 존재하지 않았던 벡터 정보가 생성되지는 않는다.
2. pdf 이미지의 스케일을 변경할 경우
    - PyPDF2 패키지를 통해 pdf 이미지의 스케일을 변경하면, 이후 이미지의 좌우상하에 여백을 주는 과정에 예상하지 못한 영향을 끼친다.
    - Ghostscript 를 사용하여 이미지의 스케일과 여백 작업을 함께 처리할 수 있다.
3. 데이터 매트릭스를 생성할 경우
    - libdmtx 는 데이터 매트릭스를 생성할 수 있는 동적 라이브러리이다.
    - 맥OS 에서 어떤 특정 환경일 경우(OS 버전 혹은 파이썬 버전 등) libdmtx 를 로딩하지 못하는 버그가 있다.
        - Mac OS Big Sur 버전부터 애플은 기본 보안 정책을 변경하여 일부 라이브러리의 동적 로딩에 문제가 발생하는 경우가 있다.
            - 이 문제는 Python 라이브러리가 동적 라이브러리를 로드할 때 경로를 올바르게 찾지 못하거나
            - 라이브러리가 SIP(System Integrity Protection)에 의해 보호되는 디렉토리에 설치되어 있는 경우에 발생한다.
            - DYLD_LIBRARY_PATH 환경변수가 더 이상 역할을 하지 못한다고 추측된다.
            - 다음과 같이 심볼릭 링크를 통해 해결이 가능하다.
                - ln -s /opt/homebrew/lib/libdmtx.dylib /usr/local/lib/
    - 명확한 해결책이 제시되지 못한 상태이다.
    - docker 의 우분투 이미지를 활용하여 안정성을 확보하는 것이 좋다.

### PDF 관련 패키지

1. PyPDF2
    - PDF 파일을 읽고 쓰기, 분할 및 병합하는 데 사용되는 Python 라이브러리이다.
    - PDF 페이지에 텍스트를 추가하는 기능을 제공하지 않는다.
    - 그러나 기존 PDF 페이지에 새 PDF 페이지를 오버레이하여 텍스트를 추가할 수 있다.
2. ReportLab
    - PDF를 생성하고 수정하는 데 사용되는 강력한 라이브러리이다.
    - 기존 PDF 파일에 텍스트를 추가할 수 있다.
3. PDFMiner
    - PDF 문서에서 텍스트, 이미지, 메타데이터를 추출하는데 사용된다.
4. pdfrw
    - PDF 파일을 읽고 쓸 수 있는 Python 라이브러리이다.
    - 기존 PDF에 텍스트를 추가하거나 이미지를 삽입하는 등의 작업을 수행할 수 있다.

### 각 이미지 포맷에 대한 설명

JPEG는 Joint Photographic Experts Group의 줄임말로, 이미지를 압축하여 저장하는 파일 형식입니다.
JPEG 파일 형식의 주요 특징은 손실 압축(lossy compression), 품질 조절(quality control) 그리고 애니메이션 미지원이라는 점입니다.

1. 손실 압축(Lossy compression): JPEG는 이미지를 압축할 때 '손실 압축'이라는 기술을 사용합니다.
    - 이 기술은 원본 이미지의 일부 정보를 버리고, 그 대신 파일 크기를 크게 줄이는 방법입니다.
    - 즉, 이미지의 크기를 줄이기 위해 일부 세부사항을 희생합니다.
    - 그래서 JPEG로 저장하면 원본 이미지와 비교했을 때 화질이 떨어질 수 있습니다.
    - 이러한 이유로, JPEG 형식은 사진이나 그림 등의 세부사항이 많이 없는 이미지에 적합합니다.
2. 품질 조절(Quality control): JPEG 파일을 저장할 때 품질 수준을 조절할 수 있습니다.
    - 높은 품질의 이미지를 원하면, 파일 크기가 커질 것입니다.
    - 반면에 파일 크기를 줄이고 싶다면, 이미지 품질이 떨어질 것입니다.
    - 이렇게 품질과 파일 크기 사이에서 선택할 수 있기 때문에 JPEG는 웹사이트에서 많이 사용되는 이미지 형식입니다.
3. 애니메이션 미지원: JPEG는 PNG처럼 투명성을 지원하지 않고, GIF처럼 애니메이션을 지원하지 않습니다.
    - JPEG는 정적인 이미지를 표현하는 데 주로 사용됩니다.
4. 색상 깊이(Color Depth): JPEG는 수백만 가지의 색상을 표현할 수 있습니다.
    - 이를 통해 사진처럼 다양한 색상을 가진 이미지를 표현하는 데 적합합니다.
5. 파일 크기: JPEG는 품질을 조절하여 파일 크기를 줄일 수 있는 능력 덕분에, 웹에서 많이 사용되는 이미지 형식입니다.
    - 동일한 이미지를 PNG와 비교하면 JPEG는 일반적으로 파일 크기가 더 작습니다.

PNG는 Portable Network Graphics의 약자로, 이미지를 압축하여 저장하는 파일 형식입니다.
PNG 파일 형식은 투명성을 지원하며, 이미지의 손실 없는 압축을 지원하는 두 가지 주요한 특징이 있습니다.

1. 손실 없는 압축(Lossless compression): PNG는 이미지를 압축하되 원래의 이미지 정보를 모두 보존합니다.
    - 이를 '손실 없는 압축'이라고 합니다.
    - 이것은 어떤 의미일까요? 흔히 우리가 사용하는 ZIP 파일과 비슷하다고 생각하면 됩니다.
    - ZIP 파일로 여러 파일을 묶어서 압축하면 파일 크기가 작아지지만, 다시 압축을 풀면 원래의 파일들이 그대로 복구되죠.
    - PNG도 비슷한 원리로 동작합니다.
    - PNG 파일을 열면, 압축되어 저장된 이미지 정보가 원래대로 복구되어 화면에 표시됩니다.
    - 그래서 PNG는 이미지의 세부 정보를 중요하게 생각하는 디지털 아트, 웹 디자인 등의 분야에서 많이 사용됩니다.
2. 투명성(Transparency): PNG 파일 형식은 투명성을 지원합니다.
    - 웹페이지에서 로고 이미지를 표시하고 싶은데, 로고가 원형이고 배경은 투명하게 하고 싶다면 PNG 형식의 이미지를 사용하면 됩니다.
    - PNG 이미지는 특정 부분을 투명하게 만들 수 있어, 웹페이지의 배경과 잘 어울릴 수 있습니다.
    - 이처럼 투명성은 이미지를 다른 요소 위에 덮어씌울 때 유용합니다.
3. 색상 깊이(Color depth): PNG는 다양한 색상 깊이를 지원합니다.
    - 색상 깊이란 한 픽셀이 표현할 수 있는 색상의 수를 의미하는데, PNG는 흑백(2색), 256색, 심지어 수백만 가지 색상을 표현할 수 있습니다.
    - 이 때문에 다양한 색상을 가진 이미지를 표현하는데 PNG가 적합합니다.
4. 애니메이션 지원 안 함: GIF 파일과 달리 PNG는 애니메이션을 지원하지 않습니다.
    - 따라서 동적인 이미지를 표현하려면 다른 형식을 사용해야 합니다.
5. 파일 크기: PNG는 품질을 중요시하기 때문에, 같은 크기의 이미지를 JPEG와 비교하면 PNG 파일이 더 크다는 단점이 있습니다.
    - 그러나, 고해상도의 이미지를 웹에서 사용하거나 출력물을 만드는 데에는 PNG가 적합합니다.

EPS는 Encapsulated PostScript의 줄임말로, 이미지, 텍스트, 그래픽 등을 포함할 수 있는 벡터 기반의 파일 형식입니다.
EPS 파일 형식의 주요 특징은 벡터 기반, 텍스트 편집 가능, 임베딩 기능이라는 점입니다.

1. 벡터 기반(Vector-based): 벡터 기반의 이미지 형식인 EPS는 점, 선, 곡선, 도형 등의 기하학적 구조를 사용해 이미지를 생성합니다.
    - 이런 벡터 이미지의 장점은 확대하거나 축소해도 이미지 품질이 저하되지 않는다는 것입니다.
    - 예를 들어, 도형이나 로고를 크게 확대하거나 축소해도 선들이 계속해서 매끄럽게 보입니다.
2. 텍스트 편집 가능: EPS 파일 형식은 텍스트 편집을 지원합니다.
    - 즉, 파일에 포함된 텍스트를 일반 텍스트 편집기로 열어 변경할 수 있습니다.
    - 또한, 다양한 폰트와 스타일을 지원하여 유연성을 제공합니다.
3. 임베딩 기능(Embedding): EPS 파일은 '임베딩'이라는 기능을 제공합니다.
    - 이는 다른 문서에 EPS 파일을 삽입하여 그래픽이나 이미지를 별도의 파일로 분리하지 않고 한 곳에서 관리할 수 있다는 것을 의미합니다.
    - 이 기능 덕분에, 그래픽 디자이너들은 인쇄물이나 웹 디자인 등에 EPS 파일을 직접 사용할 수 있습니다.
4. 호환성: EPS는 많은 그래픽 디자인 소프트웨어에서 널리 지원되므로, 디자이너들 사이에서 인기가 많습니다.
    - Adobe Illustrator, Photoshop 등의 프로그램에서 EPS 파일을 쉽게 열고 편집할 수 있습니다.
5. 크기: EPS 파일은 벡터 기반이므로, 이미지의 복잡성에 따라 파일 크기가 크게 변할 수 있습니다.
    - 간단한 도형은 매우 작은 크기로 저장될 수 있지만, 매우 복잡한 이미지는 큰 파일 크기를 가질 수 있습니다.

결국, EPS 파일 형식은 그래픽 디자인, 로고, 아이콘, 일러스트 등의 작업에 주로 사용됩니다.
그러나 웹에서는 사용되지 않습니다.
왜냐하면 대부분의 웹 브라우저가 EPS 파일 형식을 직접 지원하지 않기 때문입니다.
따라서 웹에 이미지를 게시하려면 EPS 파일을 JPEG, PNG 등의 래스터 형식으로 변환해야 합니다.

### 필요한 패키지를 한꺼번에 설치하는 방법

pip list --format=freeze > requirements.txt
